# 任务交接-苏畅

## 配筋率和配筋量统计

### 基本逻辑

选择构件->选择导出路径以及文件名->获取构件上所有的钢筋->计算配筋量->计算配筋率->存入导出的文件

### 具体逻辑

#### 计算配筋量

可以获取钢筋EC重量属性

使用mdlMeasure_volumeProperties获取构件体积，根据混凝土密度计算构件重量

配筋量 = 钢筋重量/钢筋混凝土总重量

#### 计算配筋率

取出横竖钢筋方向向量

根据钢筋方向找到对应的截面

根据钢筋方向与截面法向量关系，将钢筋点投影到截面上，分别计算两个截面的投影钢筋数据

根据钢筋点总投影数量与钢筋直径计算钢筋截面面积

使用mdlMeasure_areaProperties分别计算两个截面的面积

配筋率 = 钢筋截面面积/混凝土截面面积

#### 导出到文件

使用BasicExcel库

## 环板切割工具（核岛配筋）

### 基本操作

选择开始角度，扫掠角度，数量。按照此参数增加行。

### 基本逻辑

选择板->配置切割参数->验证参数有效性->获取板半径->根据每一行配置参数角度，扩大半径范围绘制切割面->根据所选板构件提取原始结构和孔洞->根据切割面创建切割体->根据切割体和原始结构构件取相交实体和相减实体->根据原始结构的参数化属性写入切割后的结构

## 环板开孔工具（核岛配筋）

### 基本操作

配置参数->孔洞类型、孔洞名称、角度、位置半径、圆孔（孔洞半径）、方孔（孔洞长度、孔洞宽度）

### 基本逻辑

确定环板中心点->创建孔(圆孔：根据位置半径和角度在环板指定位置创建圆形面再加厚为圆柱)（方孔：在环板圆心创建矩形，以圆心为放射线中心旋转，根据位置半径和角度移动，最后加厚为方柱）->根据孔与原始结构求交集，使用交集作为新的孔洞

### 具体逻辑

#### 在实体创建孔洞createholeInSolid

获取结构未开孔的原始结构

取开孔元素和原始结构的交集作为新的开孔

取所有的孔洞作差

根据新的所有孔洞结果在原始结构开孔

将结构的属性写入到新开孔的原始结构

删除旧的结构

获取新开孔以及结构属性的原始结构作为新结构

## 生成预应力管道和预应力管道打孔

### 基本逻辑



## 【廊道配筋PS】搭接合并工具：多根搭接钢筋进行合并处理

### 基本逻辑



## 【廊道配筋PS】优化钢筋合并：不同坡度板之间的横筋进行合并

### 基本逻辑

